(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,a,t){e.exports=t(201)},192:function(e,a,t){},193:function(e,a,t){},201:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(163),c=t.n(r),o=(t(192),t(193),t(90)),m=t(12),s=t(181),i=t(220),u=t(56);const d=[{key:"1",label:n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.antgroup.com"},"Profile")},{key:"2",label:n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.aliyun.com"},"My bookings")},{key:"3",label:n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.luohanacademy.com",onClick:()=>{localStorage.removeItem("user"),window.location.href="/login"}},"Logout")}],E=JSON.parse(localStorage.getItem("user"));var p=function(e){return n.a.createElement("div",null,n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"d-flex justify-content-between border",style:{padding:10}},n.a.createElement("h1",null,"Rent car"),n.a.createElement(s.a,{direction:"vertical",style:{marginRight:30}},n.a.createElement(s.a,{wrap:!0},n.a.createElement(i.a,{menu:{items:d},placement:"bottom"},n.a.createElement(u.a,null,E.username))))),n.a.createElement("div",{className:"content"},e.children)))},g=t(36),y=t(224),b=t(217);const h=()=>async e=>{e({type:"LOADING",payload:!0});try{e({type:"GET_ALL_CARS",payload:(await b.a.get("http://localhost:5000/api/cars/getallcars")).data}),e({type:"LOADING",payload:!1})}catch(a){console.log(a),e({type:"LOADING",payload:!1})}},f=e=>async a=>{a({type:"LOADING",payload:!0});try{await b.a.post("http://localhost:5000/api/cars/addcar",e),a({type:"LOADING",payload:!1}),y.a.success("New car added successfully"),setTimeout(()=>{window.location.href="/admin"},200)}catch(t){console.log(t),a({type:"LOADING",payload:!1})}},O=e=>async a=>{a({type:"LOADING",payload:!0});try{await b.a.post("http://localhost:5000/api/cars/editcar",e),a({type:"LOADING",payload:!1}),y.a.success("Car details updated successfully"),setTimeout(()=>{window.location.href="/admin"},200)}catch(t){console.log(t),a({type:"LOADING",payload:!1})}},N=e=>async a=>{a({type:"LOADING",payload:!0});try{await b.a.post("http://localhost:5000/api/cars/deletecar",e),a({type:"LOADING",payload:!1}),y.a.success("Car deleted successfully"),setTimeout(()=>{window.location.reload()},200)}catch(t){console.log(t),a({type:"LOADING",payload:!1})}};var w=t(218),v=t(216),I=t(214),j=t(215),k=t(227);var L=function(){return n.a.createElement("div",{className:"spinner"},n.a.createElement(k.a,{size:"large"}))};const{Meta:A}=w.a;var D=function(){const{cars:e}=Object(g.c)(e=>e.carsReducer),{loading:a}=Object(g.c)(e=>e.alertsReducer),[t,r]=Object(l.useState)([]),{RangePicker:c}=v.a,m=Object(g.b)();return Object(l.useEffect)(()=>{m(h())},[m]),Object(l.useEffect)(()=>{r(e)},[e]),n.a.createElement(p,null,n.a.createElement(I.a,{className:"mt-3",justify:"center"},n.a.createElement(j.a,{lg:20,sm:24,className:"d-flex justify-content-flex"},n.a.createElement(c,{onChange:a=>{if(a){const[t,l]=a,n=e.filter(e=>new Date(e.availableFrom)<=l&&new Date(e.availableTo)>=t);r(n)}else r(e)}}))),!0===a&&n.a.createElement(L,null),n.a.createElement(I.a,{justify:"center"},t.length>0?t.map(e=>n.a.createElement(j.a,{lg:5,sm:24,xs:24,style:{padding:5,margin:5},key:e._id},n.a.createElement(w.a,{hoverable:!0,style:{width:240},cover:n.a.createElement("img",{alt:"example",src:e.image,className:"card-img"})},n.a.createElement(A,{title:e.name,description:`$${e.rentPerHour} per hour`}),n.a.createElement("div",{style:{padding:5,marginTop:10}},n.a.createElement(u.a,{type:"primary"},n.a.createElement(o.b,{to:`/booking/${e._id}`},"Book now")))))):n.a.createElement(j.a,{span:24},n.a.createElement("h3",null,"No cars available for the selected date range"))))},T=t(221),G=t(223),S=t(225);const R=e=>async a=>{a({type:"LOADING",payload:!0});try{const l=await b.a.post("http://localhost:5000/api/users/login",e);localStorage.setItem("user",JSON.stringify(l.data)),a({type:"LOADING",payload:!1}),y.a.success("login successfull"),setTimeout(()=>{window.location.href="/"},50)}catch(t){console.log(t),y.a.error("error"+t),a({type:"LOADING",payload:!1})}},P=e=>async a=>{a({type:"LOADING",payload:!0});try{await b.a.post("http://localhost:5000/api/users/register",e),a({type:"LOADING",payload:!1}),y.a.success("Registration successful"),setTimeout(()=>{window.location.href="/login"},50)}catch(t){console.log(t),y.a.error("Something went wrong"),a({type:"LOADING",payload:!1})}};var C=function(){const e=Object(g.b)();return n.a.createElement("div",null,n.a.createElement(I.a,{gutter:16,style:{marginTop:100}},n.a.createElement(j.a,{lg:8}),n.a.createElement(j.a,{lg:8,className:"login"},n.a.createElement(T.a,{layout:"vertical",onFinish:function(a){e(R(a)),console.log(a)}},n.a.createElement("h1",null,"Login"),n.a.createElement("hr",null),n.a.createElement(T.a.Item,{name:"username",label:"Username",rules:[{required:!0}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{name:"password",label:"Password",rules:[{required:!0}]},n.a.createElement(G.a,null)),n.a.createElement("button",{type:"primary"},"Login"),n.a.createElement("br",null),n.a.createElement(S.a,{items:[{key:"register",href:"/register",title:"Click here to register"}]})))))};var x=function(){const e=Object(g.b)();return n.a.createElement("div",null,n.a.createElement(I.a,{gutter:16,style:{marginTop:100}},n.a.createElement(j.a,{lg:8}),n.a.createElement(j.a,{lg:8,className:"login"},n.a.createElement(T.a,{layout:"vertical",onFinish:function(a){e(P(a)),console.log(a)}},n.a.createElement("h1",null,"Register"),n.a.createElement("hr",null),n.a.createElement(T.a.Item,{name:"username",label:"Username",rules:[{required:!0}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{name:"password",label:"Password",rules:[{required:!0}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{name:"cpassword",label:"Confirm password",rules:[{required:!0}]},n.a.createElement(G.a,null)),n.a.createElement("button",{type:"primary",style:{marginBottom:4}},"Register"),n.a.createElement("br",null),n.a.createElement(S.a,{items:[{key:"login",href:"/login",title:"Click here to login"}]})))))},_=t(229),q=t(228),Y=t(222),M=t(127),F=t.n(M);const H=e=>async a=>{a({type:"LOADING",payload:!0});try{const l=await b.a.post("http://localhost:5000/api/bookings/bookcar",e);console.log(l),window.location=l.data.url,a({type:"LOADING",payload:!1})}catch(t){console.log(t),a({type:"LOADING",payload:!1}),y.a.error("something went wrong ")}},B=()=>async e=>{e({type:"LOADING",payload:!0});try{e({type:"GET_ALL_BOOKINGS",payload:(await b.a.get("http://localhost:5000/api/bookings/getallbookings")).data}),e({type:"LOADING",payload:!1})}catch(a){console.log(a),e({type:"LOADING",payload:!1})}};var z=function(){const{carid:e}=Object(m.r)(),{cars:a}=Object(g.c)(e=>e.carsReducer),{loading:t}=Object(g.c)(e=>e.alertsReducer),[r,c]=Object(l.useState)({}),o=Object(g.b)(),{RangePicker:i}=v.a,[d,E]=Object(l.useState)(),[y,b]=Object(l.useState)(),[f,O]=Object(l.useState)(0),[N,w]=Object(l.useState)(!1),[k,A]=Object(l.useState)(0),[D,T]=Object(l.useState)(!1);return Object(l.useEffect)(()=>{0===a.length?o(h()):c(a.find(a=>a._id===e))},[a,e,o]),Object(l.useEffect)(()=>{A(f*r.rentPerHour),N&&A(k+30*f)},[N,f,r.rentPerHour,k]),n.a.createElement(p,null,t&&n.a.createElement(L,null),n.a.createElement(I.a,{justify:"center",className:"d-flex align-items-center",style:{minHeight:"90vh"}},n.a.createElement(j.a,{lg:10,sm:24,xs:24},n.a.createElement("img",{src:r.image,alt:r.name||"Car image",style:{height:450,width:750}})),n.a.createElement(j.a,{lg:10,sm:24,xs:24},n.a.createElement(_.a,{type:"horizontal",dashed:!0},"Car Info"),n.a.createElement("div",{className:"text-right"},n.a.createElement("p",null,r.name),n.a.createElement("p",null,"Fuel Type: ",r.fuelType),n.a.createElement("p",null,"Max Persons: ",r.capacity)),n.a.createElement(_.a,{type:"horizontal",dashed:!0},"Time slots"),n.a.createElement(s.a,{direction:"vertical",size:12},n.a.createElement(i,{format:"YYYY-MM-DD",onChange:function(e){E(F()(e[0]).format("YYYY-MM-DD")),b(F()(e[1]).format("YYYY-MM-DD")),O(e[1].diff(e[0],"days"))}})),n.a.createElement("br",null),n.a.createElement(u.a,{className:"mt-3",onClick:()=>T(!0)},"Show booked slots"),n.a.createElement("br",null),n.a.createElement(q.a,{className:"mt-3 mb-3",onChange:e=>w(e.target.checked)},"Driver required"),n.a.createElement("br",null),d&&y&&n.a.createElement("div",null,n.a.createElement("p",null,"Total hours: ",n.a.createElement("b",null,f)),n.a.createElement("p",null,"Rent per hour: ",n.a.createElement("b",null,r.rentPerHour)),n.a.createElement("p",null,"Total amount: ",k)),r.name&&n.a.createElement(Y.a,{title:"Booked time slots",open:D,closable:!1,footer:!1},a.length&&n.a.createElement("div",{className:"p-2"},r.bookedTimeSlots.map(e=>n.a.createElement(u.a,{type:"primary",size:"large",className:"mt-3",key:e.from},e.from," - ",e.to)),n.a.createElement("div",{className:"text-right"},n.a.createElement(u.a,{type:"primary",className:"mt-3",onClick:()=>T(!1)},"Close")))),n.a.createElement(u.a,{type:"dashed",size:"large",className:"mt-3",onClick:function(){const e={user:JSON.parse(localStorage.getItem("user"))._id,car:r._id,totalHours:f,totalAmount:k,driverRequired:N,bookedTimeSlots:{from:d,to:y}};o(H(e))}},"Book now"))))},$=t(219);var J=function(){const e=Object(g.b)(),{bookings:a}=Object(g.c)(e=>e.bookingsReducer);return Object(l.useEffect)(()=>{e(B())},[e]),n.a.createElement(p,null,n.a.createElement("h1",null,"My Bookings"),n.a.createElement(I.a,{justify:"center"},n.a.createElement(j.a,{lg:20,sm:24},a.length>0?a.map(e=>{const a=`Transaction id: ${e.transactionId}`;return n.a.createElement(w.a,{key:e._id,type:"inner",className:"w-100 mt-3 mb-3",title:a},n.a.createElement(I.a,{className:"m-2"},n.a.createElement(j.a,{lg:7,sm:24},n.a.createElement("p",null,"Total days: ",n.a.createElement("b",null,e.totalHours)),n.a.createElement("p",null,"Rent per day: ",n.a.createElement("b",null,e.car.rentPerHour)),n.a.createElement("p",null,"Total Amount: ",n.a.createElement("b",null,e.totalAmount))),n.a.createElement(j.a,{lg:10,sm:24},n.a.createElement("p",null,"Name: ",n.a.createElement("b",null,e.car.name)),n.a.createElement("p",null,"From: ",n.a.createElement("b",null,e.bookedTimeSlots.from)),n.a.createElement("p",null,"To: ",n.a.createElement("b",null,e.bookedTimeSlots.to)),n.a.createElement("p",null,"Date of booking:"," ",n.a.createElement("b",null,F()(e.createdAt).format("MMM DD, YYYY")))),n.a.createElement(j.a,{lg:7,sm:24},n.a.createElement($.a,{src:e.car.image,alt:`Image of ${e.car.name}`,height:"150"}))))}):n.a.createElement(j.a,{span:24},n.a.createElement("p",null,"No bookings available.")))))};var U=function(){const e=Object(g.b)(),{loading:a}=Object(g.c)(e=>e.alertsReducer);return n.a.createElement(p,null,a&&n.a.createElement(L,null),n.a.createElement(I.a,{justify:"center mt-5"},n.a.createElement(j.a,{lg:12,sm:24},n.a.createElement(T.a,{className:"p-2",layout:"vertical",onFinish:a=>{a.bookedTimeSlots=[],e(f(a)),console.log("Success:",a)}},n.a.createElement("h1",null,"Add car"),n.a.createElement(T.a.Item,{label:"Car name",name:"name",rules:[{required:!0,message:"Please input the car name!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{label:"Image URL",name:"image",rules:[{required:!0,message:"Please input the image!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{label:"Price per day",name:"rentPerHour",rules:[{required:!0,message:"Please input the price!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{label:"Ability",name:"capacity",rules:[{required:!0,message:"Please input the capacity!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{label:"Fuel Type",name:"fuelType",rules:[{required:!0,message:"Please input the fuel type!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,null,n.a.createElement("div",{className:"text-right"},n.a.createElement(u.a,{type:"primary",htmlType:"submit"},"Add car")))))))},K=t(226),V=t(184),Q=t(230),W=t(231);const{Meta:X}=w.a;var Z=function(){const{cars:e}=Object(g.c)(e=>e.carsReducer),{loading:a}=Object(g.c)(e=>e.alertsReducer),t=Object(g.b)();return Object(l.useEffect)(()=>{t(h())},[t]),n.a.createElement(p,null,!0===a&&n.a.createElement(L,null),n.a.createElement(I.a,{justify:"center"},e.map(e=>n.a.createElement(j.a,{lg:5,sm:24,xs:24,style:{padding:5,margin:5},key:e._id},n.a.createElement(w.a,{hoverable:!0,style:{width:240},cover:n.a.createElement("img",{alt:"example",src:e.image,className:"card-img"})},n.a.createElement(X,{title:e.name,description:e.rentPerHour}),n.a.createElement("div",{style:{padding:5,marginTop:10}},n.a.createElement(K.a,{title:"Delete the car",description:"Are you sure to delete this car?",onConfirm:()=>t(N({carid:e._id})),icon:n.a.createElement(V.a,{style:{color:"red"}})},n.a.createElement(Q.a,{className:"p-3",style:{color:"red",cursor:"pointer"}})),n.a.createElement(o.b,{to:`/editcar/${e._id}`},n.a.createElement(W.a,{className:"p-3",style:{color:"blue",cursor:"pointer"}}))))))))};var ee=function(){const e=Object(g.b)(),{cars:a}=Object(g.c)(e=>e.carsReducer),{loading:t}=Object(g.c)(e=>e.alertsReducer),[r,c]=Object(l.useState)(null),{carid:o}=Object(m.r)();return Object(l.useEffect)(()=>{if(0===a.length)e(h());else{const e=a.find(e=>e._id===o);e&&c(e)}},[a,o,e]),t?n.a.createElement(L,null):r?n.a.createElement(p,null,n.a.createElement(I.a,{justify:"center",className:"mt-5"},n.a.createElement(j.a,{lg:12,sm:24},n.a.createElement(T.a,{initialValues:r,className:"p-2",layout:"vertical",onFinish:a=>{a._id=r._id,e(O(a)),console.log("Success:",a)}},n.a.createElement("h1",null,"Edit Car"),n.a.createElement("h5",null,r.name),n.a.createElement(T.a.Item,{label:"Car Name",name:"name",rules:[{required:!0,message:"Please input the car name!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{label:"Image URL",name:"image",rules:[{required:!0,message:"Please input the image URL!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,{label:"Price per Day",name:"rentPerHour",rules:[{required:!0,message:"Please input the price per day!"}]},n.a.createElement(G.a,{type:"number"})),n.a.createElement(T.a.Item,{label:"Capacity",name:"capacity",rules:[{required:!0,message:"Please input the capacity!"}]},n.a.createElement(G.a,{type:"number"})),n.a.createElement(T.a.Item,{label:"Fuel Type",name:"fuelType",rules:[{required:!0,message:"Please input the fuel type!"}]},n.a.createElement(G.a,null)),n.a.createElement(T.a.Item,null,n.a.createElement("div",{className:"text-right"},n.a.createElement(u.a,{type:"primary",htmlType:"submit"},"Edit Car"))))))):n.a.createElement("div",null,"Loading...")};var ae=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(o.a,null,n.a.createElement(m.d,null,n.a.createElement(m.b,{path:"/",exact:!0,element:n.a.createElement(D,null)}),n.a.createElement(m.b,{path:"/login",exact:!0,element:n.a.createElement(C,null)}),n.a.createElement(m.b,{path:"/register",exact:!0,element:n.a.createElement(x,null)}),n.a.createElement(m.b,{path:"/booking/:carid",exact:!0,element:n.a.createElement(te,null,n.a.createElement(z,null))}),n.a.createElement(m.b,{path:"/userbookings",exact:!0,element:n.a.createElement(te,null,n.a.createElement(J,null))}),n.a.createElement(m.b,{path:"/addcar",exact:!0,element:n.a.createElement(te,null,n.a.createElement(U,null))}),n.a.createElement(m.b,{path:"/admin",exact:!0,element:n.a.createElement(te,null,n.a.createElement(Z,null))}),n.a.createElement(m.b,{path:"/editcar/:carid",exact:!0,element:n.a.createElement(te,null,n.a.createElement(ee,null))}))))};function te(e){let{children:a}=e;return localStorage.getItem("user")?a:n.a.createElement(m.a,{to:"/login"})}var le=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,232)).then(a=>{let{getCLS:t,getFID:l,getFCP:n,getLCP:r,getTTFB:c}=a;t(e),l(e),n(e),r(e),c(e)})},ne=t(104),re=t(179),ce=t(180);const oe={cars:[]},me={loading:!1},se={bookings:[]},ie=Object(re.a)({}),ue=Object(ne.b)({carsReducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ALL_CARS":return{...e,cars:a.payload};default:return e}},alertsReducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOADING":return{...e,loading:a.payload};default:return e}},bookingsReducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ALL_BOOKINGS":return{...e,bookings:a.payload};default:return e}}});var de=Object(ne.d)(ue,ie(Object(ne.a)(ce.a)));c.a.createRoot(document.getElementById("root")).render(n.a.createElement(g.a,{store:de},n.a.createElement(ae,null))),le()}},[[186,1,2]]]);
//# sourceMappingURL=main.086f73d3.chunk.js.map